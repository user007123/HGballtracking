<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>HoverGreens Ball Color Sampler</title>
<style>
  body { background:#000; color:#0f0; font-family:Arial; text-align:center; margin:0; }
  #info { font-size:18px; margin-top:10px; }
  video { display:none; }
  canvas { border:2px solid #0f0; margin-top:10px; cursor:crosshair; }
</style>
</head>
<body>

<h2>ðŸŽ¯ Hover cursor over BALL, then over TURF</h2>
<div id="info">Initializing Camera...</div>

<video id="cam" autoplay playsinline muted></video>
<canvas id="view" width="1180" height="370"></canvas>

<script>
const video = document.getElementById("cam");
const canvas = document.getElementById("view");
const ctx = canvas.getContext("2d", { willReadFrequently:true });
const info = document.getElementById("info");

// *** BEGIN CAMERA ***
navigator.mediaDevices.getUserMedia({
  video:{
    width:{ideal:1280},
    height:{ideal:720},
    frameRate:{ideal:60, max:60},
    facingMode:"environment"
  },
  audio:false
}).then(stream=>{
  video.srcObject = stream;
  video.onloadedmetadata = ()=>{ video.play(); draw(); info.textContent="âœ… Hover on Ball & Turf to read values"; };
}).catch(err=>{
  info.textContent = "âŒ Camera blocked";
});

// *** DRAW LOOP ***
function draw(){
  requestAnimationFrame(draw);
  ctx.save();
  ctx.scale(-1,-1); // mirror for overhead
  ctx.drawImage(video, -canvas.width, -canvas.height, canvas.width, canvas.height);
  ctx.restore();
}

// *** CONVERT & DISPLAY PIXEL DATA ***
canvas.addEventListener("mousemove", e => {
  const rect = canvas.getBoundingClientRect();
  const x = (e.clientX - rect.left) * (canvas.width/rect.width);
  const y = (e.clientY - rect.top) * (canvas.height/rect.height);

  const pixel = ctx.getImageData(x,y,1,1).data;
  const R = pixel[0], G = pixel[1], B = pixel[2];
  const brightness = Math.round((R+G+B)/3);
  const sat = Math.round((Math.max(R,G,B) - Math.min(R,G,B))); // saturation proxy

  info.innerHTML = `
    X:${Math.round(x)} Y:${Math.round(y)}<br>
    R:${R}  G:${G}  B:${B}<br>
    Brightness:${brightness}<br>
    Saturation:${sat}
  `;
});
</script>

</body>
</html>
