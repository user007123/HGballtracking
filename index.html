<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HoverGreens — CV Boot Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { background:black; color:white; text-align:center; font-family:Arial;}
  #status { margin:10px; font-size:18px; }
  video, canvas { width:1180px; height:370px; background:#111; display:block; margin:auto;}
</style>
<script async src="https://docs.opencv.org/4.x/opencv.js"></script>
</head>
<body>

<h2>HoverGreens Vision — OpenCV Boot Test</h2>
<div id="status">Booting OpenCV…</div>

<video id="v" autoplay playsinline></video>
<canvas id="c" width="1180" height="370"></canvas>

<script>
const statusEl=document.getElementById("status");
const video=document.getElementById("v");
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");

statusEl.textContent="Requesting camera…";

navigator.mediaDevices.getUserMedia({video:true}).then(stream=>{
  video.srcObject=stream;
  video.onloadedmetadata=()=>video.play();
  statusEl.textContent="Camera ready — waiting for OpenCV…";
}).catch(_=>{
  statusEl.textContent="Camera blocked. Allow permission.";
});

function loop(){
  ctx.save();
  ctx.scale(-1,1);
  ctx.drawImage(video,-canvas.width,0,canvas.width,canvas.height);
  ctx.restore();

  // small white dot to prove drawing works
  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(50,50,10,0,Math.PI*2);
  ctx.fill();

  requestAnimationFrame(loop);
}

cv.onRuntimeInitialized = ()=>{
  statusEl.textContent="✅ OpenCV Ready — drawing enabled";
  loop();
};
</script>
</body>
</html>
